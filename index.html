<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<title>SOAP API</title>
<style>
:root{ 
  --bg:#f5f7fb;
  --card:#fff;
  --accent:#0b6efd;
  --muted:#666; }
*{box-sizing:border-box}
body{
  margin:0;
  font-family:Inter,system-ui,-apple-system,"Segoe UI",Roboto,"Helvetica Neue",Arial;background:var(--bg);color:#111;-webkit-font-smoothing:antialiased;padding:20px;}
header{
  text-align:center;
  margin-bottom:18px;}

header h1{
  margin:0;
  font-size:22px}

header p{
  margin:6px 0 0;
  color:var(--muted)}
main{
  max-width:980px;
  margin:16px auto;
  display:grid;
  grid-template-columns:repeat(auto-fit,minmax(300px,1fr));gap:14px;}
.card{background:var(--card);
  border-radius:10px;
  padding:14px;
  box-shadow:0 6px 18px rgba(15,20,30,0.06);
  border:1px solid rgba(12,17,28,0.03);}
.card h2
{margin:0 0 10px;
  font-size:18px}
.row{display:flex;
  gap:8px;
  flex-wrap:wrap;
  margin-bottom:10px;}
.row input,.row select{
  flex:1 1 160px;
  padding:8px 10px;
  border-radius:6px;
  border:1px solid #d6dbe6;
  font-size:14px;}
.row button{
  padding:9px 12px;
  background:var(--accent);
  color:white;
  border:none;
  border-radius:6px;
  cursor:pointer;
  font-weight:600;}
.row button:hover{opacity:0.92}
.result{
  margin-top:8px;
  font-weight:700;
  color:#0f1724;}

.country-output img{
  max-width:140px;
  border-radius:6px;
  border:1px solid #eee;
  margin-top:8px;}

.note ul
{margin:8px 0 0;
  padding-left:18px;
  color:var(--muted)}
footer
{text-align:center;
  margin-top:18px;
  color:var(--muted);
  font-size:13px}
@media(max-width:480px){
  body{padding:12px}header h1{font-size:18px}}


/* --- Improved UI only (paste over your current <style> block) --- */
:root{
  --bg: #f4f7fb;
  --card: #ffffff;
  --muted: #6b7280;
  --text: #0f1724;
  --accent: #0b6efd;
  --accent-600: #0753d9;
  --glass: rgba(255,255,255,0.6);
  --ring: rgba(11,110,237,0.18);
  --shadow: 0 10px 30px rgba(15,20,30,0.06);
  --radius: 12px;
  --gap: 14px;
  font-synthesis: none;
}

*{box-sizing:border-box}
html,body{height:100%}
body{
  margin:0;
  font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial;
  background:linear-gradient(180deg, #f7fbff 0%, var(--bg) 100%);
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  padding:28px;
  line-height:1.35;
}

/* Header */
header{
  max-width:1100px;margin:0 auto 20px;padding:18px 20px;
  display:flex;align-items:center;gap:12px;justify-content:space-between;
  background:linear-gradient(90deg, rgba(11,110,237,0.06), rgba(11,110,237,0.02));
  border-radius:14px;
  box-shadow:var(--shadow);
}
header .title{
  display:flex;flex-direction:column;
}
header h1{font-size:20px;margin:0;color:var(--text)}
header p{margin:4px 0 0;color:var(--muted);font-size:13px}

/* Main layout */
main{
  max-width:1100px;margin:18px auto;display:grid;
  grid-template-columns:repeat(2, 1fr);gap:var(--gap);
}
@media (max-width:980px){
  main{grid-template-columns:repeat(auto-fit,minmax(300px,1fr));padding:0 8px}
}

/* Card */
.card{
  background:var(--card);
  border-radius:var(--radius);
  padding:16px;
  box-shadow:var(--shadow);
  border:1px solid rgba(15,20,30,0.03);
  transition:transform .14s ease, box-shadow .14s ease;
}
.card:hover{ transform:translateY(-4px); box-shadow:0 18px 40px rgba(15,20,30,0.08); }

.card h2{margin:0 0 10px;font-size:16px;color:var(--text)}

/* Rows */
.row{display:flex;gap:10px;flex-wrap:wrap;align-items:center;margin-bottom:12px}
.row input, .row select, .row button{
  padding:10px 12px;border-radius:10px;border:1px solid #e6eefc;font-size:14px;
  background:linear-gradient(180deg, #fff, #fbfdff);
  min-height:42px;
}
.row input[type="number"], .row input[type="text"]{flex:1 1 150px;outline:none}
.row select{flex:0 0 170px}

/* Buttons */
.row button{
  background:linear-gradient(180deg,var(--accent),var(--accent-600));
  color:white;border:none;cursor:pointer;font-weight:700;
  box-shadow:0 6px 18px rgba(11,110,237,0.12);
  transition:transform .12s ease, opacity .12s ease;
}
.row button:hover{ transform:translateY(-2px); opacity:.98 }

/* Result */
.result{
  margin-top:6px;font-weight:700;color:var(--text);
  background:linear-gradient(180deg, #fbfdff, #f0f8ff);
  padding:10px;border-radius:10px;border:1px solid rgba(11,110,237,0.06);
  display:inline-block;min-width:120px;
}

/* Country flag preview */
.country-output img{max-width:120px;border-radius:8px;border:1px solid #eee;margin-top:8px;display:block}

/* Note card */
.note ul{margin:8px 0 0;padding-left:18px;color:var(--muted);font-size:13px}
.note{opacity:.95}

/* Footer */
footer{text-align:center;margin-top:18px;color:var(--muted);font-size:13px}

/* Small utilities */
.small{font-size:13px;color:var(--muted)}
kbd{background:#f3f4f6;border-radius:6px;padding:4px 6px;font-size:12px;border:1px solid #e6eefc}

/* Accessibility: focus styles */
input:focus, select:focus, button:focus{
  outline:2px solid var(--ring); outline-offset:2px;
  box-shadow:0 6px 18px rgba(11,110,237,0.06);
}

/* Tiny responsive tweak for very small screens */
@media(max-width:420px){
  header{flex-direction:column;align-items:flex-start;gap:6px}
  .row input{width:100%}
  .row select{width:100%}
  .row button{width:100%}
}






:root{
  --bg: #f3e8ff;           
  --card: #ffffff;
  --muted: #5b5b75;
  --text: #1e1b2e;
  --accent: #6d28d9;       /* deeper purple */
  --accent-600: #4c1d95;   /* darker purple */
  --ring: rgba(109,40,217,0.3);
  --shadow: 0 10px 30px rgba(15,20,30,0.12);
  --radius: 12px;
  --gap: 14px;
}

/* Body gradient background */
body{
  margin:0;
  font-family:Inter,ui-sans-serif,system-ui,-apple-system,"Segoe UI",Roboto,Helvetica,Arial;
  background:linear-gradient(180deg, #ede9fe 0%, #c4b5fd 100%); /* darker purple gradient */
  color:var(--text);
  -webkit-font-smoothing:antialiased;
  -moz-osx-font-smoothing:grayscale;
  padding:28px;
  line-height:1.35;
}

/* Header */
header{
  max-width:1100px;margin:0 auto 20px;padding:18px 20px;
  display:flex;align-items:center;gap:12px;justify-content:space-between;
  background:linear-gradient(90deg, rgba(109,40,217,0.15), rgba(109,40,217,0.05));
  border-radius:14px;
  box-shadow:var(--shadow);
}
header h1{font-size:20px;margin:0;color:var(--text)}
header p{margin:4px 0 0;color:var(--muted);font-size:13px}

/* Card */
.card{
  background:var(--card);
  border-radius:var(--radius);
  padding:16px;
  box-shadow:var(--shadow);
  border:1px solid rgba(109,40,217,0.1);
  transition:transform .14s ease, box-shadow .14s ease;
}
.card:hover{ transform:translateY(-4px); box-shadow:0 18px 40px rgba(109,40,217,0.25); }

/* Buttons */
.row button{
  background:linear-gradient(180deg,var(--accent),var(--accent-600));
  color:white;border:none;cursor:pointer;font-weight:700;
  box-shadow:0 6px 18px rgba(109,40,217,0.28);
  transition:transform .12s ease, opacity .12s ease;
}
.row button:hover{ transform:translateY(-2px); opacity:.98 }

/* Result */
.result{
  margin-top:6px;font-weight:700;color:var(--text);
  background:linear-gradient(180deg, #ede9fe, #ddd6fe);
  padding:10px;border-radius:10px;border:1px solid rgba(109,40,217,0.25);
  display:inline-block;min-width:120px;
}

/* Inputs/selects */
.row input, .row select{
  background:linear-gradient(180deg, #fff, #f4f3ff);
  border:1px solid #c4b5fd;
}

/* Accessibility focus */
input:focus, select:focus, button:focus{
  outline:2px solid var(--ring); outline-offset:2px;
  box-shadow:0 6px 18px rgba(109,40,217,0.28);
}



</style>
</head>
<body>
<header>
  <h1>SOAP API</h1>
  <p>Calculator • Country Info • Temperature Convert • Number → Words</p>
</header>

<main>
  <!-- Calculator -->
  <section class="card">
    <h2>Calculator</h2>
    <div class="row">
      <input id="calc-num1" type="number" placeholder="First number" />
      <input id="calc-num2" type="number" placeholder="Second number" />
    </div>
    <div class="row">
      <select id="calc-op">
        <option value="Add">Add (+)</option>
        <option value="Subtract">Subtract (-)</option>
        <option value="Multiply">Multiply (×)</option>
        <option value="Divide">Divide (÷)</option>
      </select>
      <button id="calc-btn">Calculate</button>
    </div>
    <div class="result" id="calc-result">Result: --</div>
  </section>

  <!-- Country Info -->
  <section class="card">
    <h2>Country Info</h2>
    <div class="row">
      <input id="country-code" type="text" placeholder="ISO Code (e.g. PK)" />
      <button id="country-btn">Search</button>
    </div>
    <div id="country-output" class="country-output"></div>
  </section>

  <!-- Temperature Conversion -->
  <section class="card">
    <h2>Temperature Conversion</h2>
    <div class="row">
      <input id="temp-val" type="text" placeholder="Temperature value" />
      <select id="temp-dir">
        <option value="CelsiusToFahrenheit">Celsius → Fahrenheit</option>
        <option value="FahrenheitToCelsius">Fahrenheit → Celsius</option>
      </select>
      <button id="temp-btn">Convert</button>
    </div>
    <div class="result" id="temp-result">Result: --</div>
  </section>

  <!-- Number to Words -->
  <section class="card">
    <h2>Number → Words/Dollars</h2>
    <div class="row">
      <input id="num-input" type="text" placeholder="Enter a number" />
      <select id="num-mode">
        <option value="NumberToWords">NumberToWords</option>
        <option value="NumberToDollars">NumberToDollars</option>
      </select>
      <button id="num-btn">Convert</button>
    </div>
    <div class="result" id="num-result">Result: --</div>
  </section>

</main>

<footer>
  <small>Built for practice — SOAP APIs with error handling</small>
</footer>

<script>
// -----------------------
// CORS proxy with failover
// -----------------------
const PROXIES = [
  { wrap: (u) => `https://corsproxy.io/?${encodeURIComponent(u)}` },               
  { wrap: (u) => `https://proxy.cors.sh/${u}`, extra: { "x-cors-api-key": "temp" } }, 
  { wrap: (u) => `https://thingproxy.freeboard.io/fetch/${u}` },                 
];

// Generic SOAP request with proxy failover
async function soapRequest(url, body, action) {
  const errors = [];
  for (const p of PROXIES) {
    try {
      const res = await fetch(p.wrap(url), {
        method: "POST",
        headers: {
          "Content-Type": "text/xml; charset=utf-8",
          "SOAPAction": action,
          ...(p.extra || {})
        },
        body
      });
      if (!res.ok) throw new Error(`HTTP ${res.status}`);
      const text = await res.text();
      return new DOMParser().parseFromString(text, "text/xml");
    } catch (e) {
      errors.push(`${p.wrap(url)} ➜ ${e.message}`);
      // try next proxy
    }
  }
  return { error: "All proxies failed:\n" + errors.join("\n") };
}

// --------------
// Helper: tags
// --------------
function getTagValue(xml, tag) {
  const el = xml.getElementsByTagName(tag)[0] || xml.getElementsByTagNameNS("*", tag)[0];
  return el ? el.textContent : null;
}

// --------------
// Calculator
// --------------
async function calcOperation(op, a, b) {
  const body = `<?xml version="1.0"?>
  <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
    <soap:Body>
      <${op} xmlns="http://tempuri.org/">
        <intA>${a}</intA>
        <intB>${b}</intB>
      </${op}>
    </soap:Body>
  </soap:Envelope>`;
  const xml = await soapRequest(
    "http://www.dneonline.com/calculator.asmx",
    body,
    `http://tempuri.org/${op}`
  );
  if (xml.error) return "Error: " + xml.error;
  return getTagValue(xml, `${op}Result`) || "No result";
}

// -------------------
// Country Info
// -------------------
async function getCountryInfo(code) {
  const body = `<?xml version="1.0"?>
  <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
    <soap:Body>
      <FullCountryInfo xmlns="http://www.oorsprong.org/websamples.countryinfo">
        <sCountryISOCode>${code}</sCountryISOCode>
      </FullCountryInfo>
    </soap:Body>
  </soap:Envelope>`;
  const xml = await soapRequest(
    "http://webservices.oorsprong.org/websamples.countryinfo/CountryInfoService.wso",
    body,
    "http://www.oorsprong.org/websamples.countryinfo/FullCountryInfo"
  );
  if (xml.error) return { error: xml.error };
  return {
    name: getTagValue(xml, "sName") || "Unknown",
    capital: getTagValue(xml, "sCapitalCity") || "Unknown",
    currency: getTagValue(xml, "sCurrencyISOCode") || "Unknown",
  
  };
}

// -------------------
// Temperature
// -------------------
async function convertTemp(dir, value) {
  const tag = dir === "CelsiusToFahrenheit" ? "Celsius" : "Fahrenheit";
  const body = `<?xml version="1.0"?>
  <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
    <soap:Body>
      <${dir} xmlns="https://www.w3schools.com/xml/">
        <${tag}>${value}</${tag}>
      </${dir}>
    </soap:Body>
  </soap:Envelope>`;
  const xml = await soapRequest(
    "https://www.w3schools.com/xml/tempconvert.asmx",
    body,
    `https://www.w3schools.com/xml/${dir}`
  );
  if (xml.error) return "Error: " + xml.error;
  return getTagValue(xml, `${dir}Result`) || "No result";
}

// -------------------
// Number → Words
// -------------------

async function numberToWords(mode, number) {
  const paramTag = mode === "NumberToDollars" ? "dNum" : "ubiNum";   
  const body = `<?xml version="1.0"?>
  <soap:Envelope xmlns:soap="http://schemas.xmlsoap.org/soap/envelope/">
    <soap:Body>
      <${mode} xmlns="http://www.dataaccess.com/webservicesserver/">
        <${paramTag}>${number}</${paramTag}>
      </${mode}>
    </soap:Body>
  </soap:Envelope>`;
  const xml = await soapRequest(
    "https://www.dataaccess.com/webservicesserver/NumberConversion.wso",
    body,
    `http://www.dataaccess.com/webservicesserver/${mode}`
  );
  if (xml.error) return "Error: " + xml.error;
  return getTagValue(xml, `${mode}Result`) || "No result";
}


// --------------
// UI wiring
// --------------
document.addEventListener("DOMContentLoaded", () => {
  document.getElementById("calc-btn").onclick = async () => {
    const a = document.getElementById("calc-num1").value;
    const b = document.getElementById("calc-num2").value;
    const op = document.getElementById("calc-op").value;
    document.getElementById("calc-result").textContent = "Loading...";
    document.getElementById("calc-result").textContent = await calcOperation(op, a, b);
  };

  document.getElementById("country-btn").onclick = async () => {
    const code = document.getElementById("country-code").value.trim();
    document.getElementById("country-output").textContent = "Loading...";
    const info = await getCountryInfo(code);
    if (info.error) {
      document.getElementById("country-output").textContent = "Error: " + info.error;
    } else {
      document.getElementById("country-output").innerHTML = `
        <p><strong>Country:</strong> ${info.name}</p>
        <p><strong>Capital:</strong> ${info.capital}</p>
        <p><strong>Currency:</strong> ${info.currency}</p>
       
      `;
    }
  };

  document.getElementById("temp-btn").onclick = async () => {
    const value = document.getElementById("temp-val").value;
    const dir = document.getElementById("temp-dir").value;
    document.getElementById("temp-result").textContent = "Loading...";
    document.getElementById("temp-result").textContent = await convertTemp(dir, value);
  };

  document.getElementById("num-btn").onclick = async () => {
    const number = document.getElementById("num-input").value;
    const mode = document.getElementById("num-mode").value;
    document.getElementById("num-result").textContent = "Loading...";
    document.getElementById("num-result").textContent = await numberToWords(mode, number);
  };
});
</script>
</body>
</html>
